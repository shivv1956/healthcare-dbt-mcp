version: 2

models:
  - name: stg_careplans
    description: "HL7 CarePlan staging table"

    columns:
      - name: careplan_id
        description: "Unique identifier for the care plan"
        tests:
          - not_null
          - unique

      - name: patient_id
        description: "Unique identifier for the patient"
        tests:
          - not_null
          - relationships:
              arguments:
                to: ref('stg_patients')
                field: patient_id

      - name: encounter_id
        description: "Identifier for the related encounter"
        tests:
          - not_null
          - relationships:
              arguments:
                to: ref('stg_encounters')
                field: encounter_id

      - name: start_date
        description: "Care plan start date"
        tests:
          - not_null

      - name: code
        description: "Care plan code"
        tests:
          - not_null

      - name: description
        description: "Care plan description"
        tests:
          - not_null
